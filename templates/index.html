<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NovaChat</title>
  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-sky-100 to-indigo-200 flex items-center justify-center min-h-screen">

  <div class="w-full max-w-md bg-white/70 backdrop-blur-md rounded-2xl shadow-xl p-4 flex flex-col h-[80vh]">
    <h2 class="text-2xl font-bold text-center text-indigo-700 mb-4">Pulse "Stay in Sync. Stay in Pulse"</h2>

    <div id="messages" class="flex-1 overflow-y-auto space-y-2 p-2 border rounded bg-white/60 scrollbar-thin scrollbar-thumb-indigo-300"></div>

    <div class="mt-4 flex gap-2">
      <input
        id="messageInput"
        class="flex-1 border border-gray-300 rounded-full px-4 py-2 shadow-sm outline-none bg-white"
        placeholder="Type a message..."
        onkeydown="handleEnter(event)"
      />
      <button
        onclick="sendMessage()"
        class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-full shadow"
      >
        Send
      </button>
    </div>
  </div>

  <script>
  const username = prompt("Enter your name:") || "Anonymous";
  const socket = io("http://localhost:5000");

  socket.on("connect", () => {
    console.log("âœ… Connected to server");
  });

  socket.on("receive_message", (data) => {
    const msgBox = document.getElementById("messages");
    const msg = document.createElement("div");

    if (data.username === username) {
      msg.className = "px-4 py-2 rounded-xl bg-purple-600 text-white shadow w-fit max-w-xs self-end ml-auto";
    } else {
      msg.className = "px-4 py-2 rounded-xl bg-indigo-500 text-white shadow w-fit max-w-xs self-start";
    }

    msg.textContent = `${data.username}: ${data.msg}`;
    msgBox.appendChild(msg);
    msgBox.scrollTop = msgBox.scrollHeight;
  });

  function sendMessage() {
    const input = document.getElementById("messageInput");
    const message = input.value.trim();
    if (message !== "") {
      socket.emit("send_message", { username, msg: message });
      input.value = "";
    }
  }

  function handleEnter(event) {
    if (event.key === "Enter") sendMessage();
  }
</script>
       
</body>
</html>
